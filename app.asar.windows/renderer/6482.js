(global.webpackChunkxmind_vana=global.webpackChunkxmind_vana||[]).push([[6482,623],{46754:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(23645),i=a.n(n)()((function(e){return e[1]}));i.push([e.id,".uk-text-line-clamp[data-v-06781412] {\n  display: -webkit-box;\n  overflow: hidden;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n",""]);const l=i},63693:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(23645),i=a.n(n)()((function(e){return e[1]}));i.push([e.id,".lm-select-icon[data-v-e9e14f3a] {\n  visibility: hidden;\n}\n.lm-view-item[data-v-e9e14f3a]:focus {\n  background-color: transparent;\n}\n.lm-view-item:hover .lm-select-icon[data-v-e9e14f3a] {\n  visibility: visible;\n}\n",""]);const l=i},47443:(e,t,a)=>{var n=a(42118);e.exports=function(e,t){return!!(null==e?0:e.length)&&n(e,t,0)>-1}},1196:e=>{e.exports=function(e,t,a){for(var n=-1,i=null==e?0:e.length;++n<i;)if(a(t,e[n]))return!0;return!1}},41848:e=>{e.exports=function(e,t,a,n){for(var i=e.length,l=a+(n?1:-1);n?l--:++l<i;)if(t(e[l],l,e))return l;return-1}},42118:(e,t,a)=>{var n=a(41848),i=a(62722),l=a(39375);e.exports=function(e,t,a){return t==t?l(e,t,a):n(e,i,a)}},62722:e=>{e.exports=function(e){return e!=e}},45652:(e,t,a)=>{var n=a(88668),i=a(47443),l=a(1196),o=a(74757),s=a(23593),r=a(21814);e.exports=function(e,t,a){var c=-1,u=i,d=e.length,p=!0,h=[],m=h;if(a)p=!1,u=l;else if(d>=200){var v=t?null:s(e);if(v)return r(v);p=!1,u=o,m=new n}else m=t?[]:h;e:for(;++c<d;){var g=e[c],f=t?t(g):g;if(g=a||0!==g?g:0,p&&f==f){for(var k=m.length;k--;)if(m[k]===f)continue e;t&&m.push(f),h.push(g)}else u(m,f,a)||(m!==h&&m.push(f),h.push(g))}return h}},23593:(e,t,a)=>{var n=a(58525),i=a(50308),l=a(21814),o=n&&1/l(new n([,-0]))[1]==1/0?function(e){return new n(e)}:i;e.exports=o},39375:e=>{e.exports=function(e,t,a){for(var n=a-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}},50308:e=>{e.exports=function(){}},45578:(e,t,a)=>{var n=a(67206),i=a(45652);e.exports=function(e,t){return e&&e.length?i(e,n(t,2)):[]}},40623:(e,t,a)=>{"use strict";var n;a.d(t,{v:()=>n,w:()=>i}),function(e){e.LOGICRIGHT="org.xmind.ui.logic.right",e.LOGICLEFT="org.xmind.ui.logic.left",e.TREERIGHT="org.xmind.ui.tree.right",e.TREELEFT="org.xmind.ui.tree.left",e.TREESIDED="org.xmind.ui.timeline.vertical",e.ORGCHARTDOWN="org.xmind.ui.org-chart.down",e.ORGCHARTUP="org.xmind.ui.org-chart.up",e.MAPCLOCKWISE="org.xmind.ui.map.clockwise",e.MAPANTICLOCKWISE="org.xmind.ui.map.anticlockwise",e.MAP="org.xmind.ui.map",e.MAPUNBALANCED="org.xmind.ui.map.unbalanced",e.MAPFLOATING="org.xmind.ui.map.floating",e.MAPFLOATINGCLOCKWISE="org.xmind.ui.map.floating.clockwise",e.MAPFLOATINGANTICLOCKWISE="org.xmind.ui.map.floating.anticlockwise",e.TIMELINETHROUGHVERTICAL="org.xmind.ui.timeline.through.vertical",e.TIMELINESIDEDHORIZONTAL="org.xmind.ui.timeline.sided.horizontal",e.TIMELINEHORIZONTAL="org.xmind.ui.timeline.horizontal",e.FISHBONELEFTHEADED="org.xmind.ui.fishbone.leftHeaded",e.LEFTHEADTOPBONE="org.xmind.ui.fishbone.structure.lefthead.topbone",e.LEFTHEADBOTTOMBONE="org.xmind.ui.fishbone.structure.lefthead.bottombone",e.FISHBONERIGHTHEADED="org.xmind.ui.fishbone.rightHeaded",e.RIGHTHEADTOPBONE="org.xmind.ui.fishbone.structure.righthead.topbone",e.RIGHTHEADBOTTOMBONE="org.xmind.ui.fishbone.structure.righthead.bottombone",e.SPREADSHEET="org.xmind.ui.spreadsheet",e.COLUMNSPREADSHEET="org.xmind.ui.spreadsheet.column",e.TREETABLE="org.xmind.ui.treetable",e.TOPTITLETREETABLE="org.xmind.ui.treetable.toptitle",e.SPREADSHEETROW="org.xmind.ui.structure.spreadsheet.row",e.SPREADSHEETCOLUMN="org.xmind.ui.structure.column.spreadsheet",e.FISHBONELEFTHEADTOP="org.xmind.ui.fishbone.leftHeaded.top",e.FISHBONELEFTHEADBOTTOM="org.xmind.ui.fishbone.leftHeaded.bottom",e.FISHBONERIGHTHEADTOP="org.xmind.ui.fishbone.rightHeaded.top",e.FISHBONERIGHTHEADBOTTOM="org.xmind.ui.fishbone.rightHeaded.bottom",e.TIMELINEHORIZONTALUP="org.xmind.ui.timeline.horizontal.up",e.TIMELINEHORIZONTALDOWN="org.xmind.ui.timeline.horizontal.down",e.LOGICCHARTRIGHT="org.xmind.ui.logic-chart.right",e.LOGICCHARTLEFT="org.xmind.ui.logic-chart.left",e.BRACERIGHT="org.xmind.ui.brace.right",e.BRACELEFT="org.xmind.ui.brace.left",e.TIMELINEVERTICAL="org.xmind.ui.timeline.vertical"}(n||(n={}));const i={[n.MAPUNBALANCED]:"map-unbalance",[n.MAPCLOCKWISE]:"map-clockwise",[n.LOGICRIGHT]:"logic-right",[n.LOGICLEFT]:"logic-left",[n.BRACERIGHT]:"brace-right",[n.BRACELEFT]:"brace-left",[n.TREERIGHT]:"tree-right",[n.TREELEFT]:"tree-left",[n.ORGCHARTDOWN]:"org-down",[n.ORGCHARTUP]:"org-up",[n.FISHBONELEFTHEADED]:"fishbone-left",[n.FISHBONERIGHTHEADED]:"fishbone-right",[n.TIMELINEHORIZONTAL]:"timeline-horizontal",[n.TIMELINEVERTICAL]:"timeline-vertical",[n.TIMELINETHROUGHVERTICAL]:"timeline-through-vertical",[n.TIMELINESIDEDHORIZONTAL]:"timeline-sided-horizontal",[n.SPREADSHEET]:"matrix-row",[n.COLUMNSPREADSHEET]:"matrix-column",[n.TOPTITLETREETABLE]:"tree-table-column",[n.TREETABLE]:"tree-table-row"}},21292:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n,i=a(2954),l=a(78152),o=a(69931);!function(e){e.NO_RESULT="NO_RESULT",e.NO_NOTE="NO_NOTE",e.NO_TAG="NO_TAG",e.NO_SELECTION="NO_SELECTION",e.NO_FORMAT_AVAILABLE="NO_FORMAT_AVAILABLE",e.SLIDE_NO_SELECTION="SLIDE_NO_SELECTION",e.BULB="BULB"}(n||(n={}));const s=(0,i.aZ)({__name:"common-none-panel",props:{type:{default:"NO_RESULT"},sectionStyle:{default:""}},setup(e){const t=e,a=(e,...t)=>(0,l.JE)().T(e,...t),s=(0,i.Fl)((()=>({[n.NO_RESULT]:{image:(0,o.ju)("static/images/empty-panel-icon/no-result.svg"),text:a("No results found."),spacing:"-1px"},[n.NO_NOTE]:{image:(0,o.ju)("static/images/empty-panel-icon/no-note.svg"),text:a("No note exists."),spacing:"-3px"},[n.NO_TAG]:{image:(0,o.ju)("static/images/empty-panel-icon/no-tag.svg"),text:a("No marker, label or task exists."),spacing:"0px"},[n.NO_SELECTION]:{image:(0,o.ju)("static/images/empty-panel-icon/empty-selection.svg"),text:a("Select an object to format."),spacing:"-2px"},[n.NO_FORMAT_AVAILABLE]:{image:(0,o.ju)("static/images/empty-panel-icon/no-format-available.svg"),text:a("This object can't be formatted."),spacing:"5px"},[n.SLIDE_NO_SELECTION]:{image:(0,o.ju)("static/images/empty-panel-icon/slide-empty-selection.svg"),text:a("Select a topic to format."),spacing:"-2px"},[n.BULB]:{image:(0,o.ju)("static/images/empty-panel-icon/zen-mode-bulb.svg"),text:a("Please switch to original appearance to enable format options."),spacing:"5px"}}))),r=(0,i.Fl)((()=>s.value[t.type]||s.value[n.NO_RESULT]));return{__sfc:!0,NonePanelType:n,props:t,$T:a,noneTabs:s,noneTab:r}}});const r=(0,a(51900).Z)(s,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"uk-panel uk-height-expand uk-flex uk-flex-column uk-flex-center uk-width-1-1 uk-common-none-panel"},[t("div",{staticClass:"uk-panel",style:e.sectionStyle},[t("div",{staticClass:"uk-common-none-panel-icon"},[t("img",{staticStyle:{height:"60px",width:"60px"},attrs:{draggable:"false",src:a.noneTab.image,"uk-svg":""}})]),e._v(" "),t("div",{staticClass:"uk-common-none-panel-text",style:{marginTop:a.noneTab.spacing}},[e._v("\n      "+e._s(a.noneTab.text)+"\n    ")])])])}),[],!1,null,"4aba417a",null).exports},42855:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n=a(2954),i=a(95246),l=a(78152),o=function(e,t,a,n){return new(a||(a=Promise))((function(i,l){function o(e){try{r(n.next(e))}catch(e){l(e)}}function s(e){try{r(n.throw(e))}catch(e){l(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,s)}r((n=n.apply(e,t||[])).next())}))};const s=(0,n.aZ)({__name:"index",props:{items:{default:()=>[]},type:{default:"checkbox"},modelValue:{default:()=>[]},indent:{default:0},prefix:{default:""},index:null,striped:{type:Boolean,default:!1},container:null,highPerformanceMode:{type:Boolean,default:!1},width:{default:240},textWrap:{type:Boolean,default:!1},allowDirectionKey:{type:Boolean,default:!1}},emits:["click","update:modelValue","toggleitem"],setup(e,{expose:t,emit:a}){const s=e,{T:r}=(0,l.JE)(),c=(0,i.RS)(),u=e=>c(e,'13px -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, Roboto, "Helvetica Neue", Arial, sans-serif'),d=(0,n.iH)({}),p=(0,n.iH)(new Set),h=(0,n.iH)({scrollTop:0,clientHeight:100});(0,n.YP)((()=>s.modelValue),((e,t)=>{null!=e&&e!==t&&(p.value=new Set(e))}));const m=e=>{const t=e.target;h.value={scrollTop:t.scrollTop,clientHeight:t.clientHeight}},v=(e=s.container)=>{e&&(h.value={scrollTop:e.scrollTop,clientHeight:e.clientHeight})};(0,n.YP)((()=>s.container),(e=>{e&&(e.addEventListener("scroll",m),v(e))}));const g=()=>{v()};(0,n.bv)((()=>{window.addEventListener("resize",g)})),(0,n.dl)((()=>{v()})),(0,n.Jd)((()=>{window.removeEventListener("resize",g),s.container&&s.container.removeEventListener("scroll",m)}));const f=(0,n.Fl)((()=>r("<Empty Text>"))),k=(0,n.Fl)((()=>{const{items:e,indent:t}=s;if(!e||!e.length)return[];const a="$ROOT_VALUE",n=[],i=(e,t,l=[])=>{const o=e.value===a,s=e.unindent?t:t+1;if(o||n.push({value:e.value,current:e,indent:s,parentValues:l.map((e=>e.value))}),e.items)for(let t=0;t<e.items.length;t++){const a=e.items[t],n=l.concat(o?[]:e);i(a,s,n)}};return i({items:e,value:a},t||-1),n.forEach((e=>{const t=16*e.indent+16,a=s.width-(t+16),n=u(e.current.text)+10;if(e.containerWidth=a,e.textWidth=n,e.singleLineWidth=t+16+n,s.textWrap){const t=Math.ceil(n/a);e.allocatedLine=t}else e.allocatedLine=1})),n})),x=(0,n.Fl)((()=>{const{value:e}=k,t=e=>b(e)&&T(e),a={},n={},i={};for(let t=0;t<e.length;t++){const n=e[t];a[n.value]=n}for(let l=0;l<e.length;l++){const o=e[l],s=o.parentValues.join(",");s in i?n[o.value]=i[s]:i[s]=n[o.value]=o.parentValues.every((e=>t(a[e].current)))}return n})),y=(0,n.Fl)((()=>{let e=k.value.filter((e=>!!x.value[e.value]));if(!s.highPerformanceMode)return{items:e,totalHeight:0};let t=0,a=0;return e.forEach((e=>{var n,i;e.currentTop=`${t}px`,e.currentTopNumber=t;const l=12+14.4*e.allocatedLine,o=[],r=e.textWidth/(null!==(i=null===(n=e.current.text)||void 0===n?void 0:n.length)&&void 0!==i?i:0),c=Math.floor(e.containerWidth/r);if(s.textWrap)for(let t=0;t<e.allocatedLine;t++)o.push(e.current.text.slice(t*c,(t+1)*c));else a=Math.max(e.singleLineWidth,a),o.push(e.current.text);e.textLines=o,1!==o.length||o[0]||(o[0]=f.value),t+=l})),e=e.filter((e=>!(e.currentTopNumber<h.value.scrollTop-100)&&!(e.currentTopNumber>h.value.scrollTop+h.value.clientHeight+100))),{items:e,totalHeight:t,commonWidth:a}})),T=e=>e.value in d.value?Boolean(d.value[e.value]):Boolean(e.expanded),b=e=>"items"in e&&Array.isArray(e.items)&&e.items.length>0,I=e=>p.value.has(e.value),C=e=>{a("click",e)},E=e=>{d.value=Object.assign(Object.assign({},d.value),{[e.value]:!T(e)}),a("toggleitem",e.value)},w=e=>o(this,void 0,void 0,(function*(){const t=new Set([e.value]);p.value=t,a("update:modelValue",Array.from(t)),C(e)})),O=(e,t)=>o(this,void 0,void 0,(function*(){t.preventDefault(),t.stopPropagation(),E(e),yield(0,n.Y3)(),t.currentTarget.parentNode.focus()})),R=e=>{if(!s.allowDirectionKey)return;const t=Array.from(p.value);let a=null;if(t.length){const n=y.value.items.findIndex((e=>e.value===t[0]));a=y.value.items[n+("up"===e?-1:1)]}else y.value.items.find((e=>!e.current.slotType));if(a&&!a.current.slotType){w(a.current);const e=document.querySelector(`button[data-value="${a.value}"]`);e&&e.focus()}};return t({emptyText:f,currentItems:k,visibleItems:x,displayData:y,isItemExpandable:b,isItemExpanded:T,isItemChecked:I,onToggleClick:O,onClickButton:w,onKeydown:R}),{__sfc:!0,$T:r,getTextWidthFn:c,getTextWidth:u,props:s,emit:a,itemExpansions:d,internalValue:p,scrollInfo:h,containerScrollEventHandler:m,updateScrollInfoByPropsContainer:v,windowResizeHandler:g,emptyText:f,currentItems:k,visibleItems:x,displayData:y,isItemExpanded:T,isItemExpandable:b,isItemChecked:I,emitClick:C,toggleItem:E,onClickButton:w,onToggleClick:O,onKeydown:R}}});const r=(0,a(51900).Z)(s,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("ul",{staticClass:"uk-tree-list",class:{"uk-list-striped":e.striped,"uk-tree-list-solid-background":e.striped},staticStyle:{position:"relative"},style:{height:e.highPerformanceMode?`${a.displayData.totalHeight}px`:"auto","flex-shrink":0},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:a.onKeydown("up")},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:a.onKeydown("down")}]}},e._l(a.displayData.items,(function(n){return t("li",{key:n.value,class:{"uk-checked":a.isItemChecked(n.current)},staticStyle:{"min-width":"100%","word-break":"break-all"},style:e.highPerformanceMode?{position:"absolute",top:n.currentTop,width:e.textWrap?"100%":`${a.displayData.commonWidth}px`}:{width:"100%"}},[e._t(n.current.slotType,(function(){return[t("button",{staticClass:"uk-tree-list-item",class:{"uk-checked":a.isItemChecked(n.current),"uk-focus":a.isItemChecked(n.current)},style:{"padding-left":16*n.indent+16+"px"},attrs:{type:"button","data-value":n.value},on:{click:function(e){return a.onClickButton(n.current)}}},[e.highPerformanceMode?e._l(n.textLines,(function(a,n){return t("p",{key:n,staticClass:"uk-text-nowrap uk-margin-remove"},[e._v("\n            "+e._s(a)+"\n          ")])})):[e._v("\n          "+e._s(n.current.text||a.emptyText)+"\n        ")]],2)]}),{data:n.current,checked:a.isItemChecked(n.current),index:e.index,offset:16*n.indent+16,onClick:()=>a.onClickButton(n.current)}),e._v(" "),a.isItemExpandable(n.current)?t("a",{staticClass:"uk-tree-list-toggle uk-icon uk-button uk-tree-list-toggle-icon uk-button-icon",style:{left:16*n.indent+"px",opacity:"number"==typeof n.current.triangleOpacity?n.current.triangleOpacity:.5},attrs:{href:"javascript: void 0;",tabindex:"-1","uk-icon":a.isItemExpanded(n.current)?"triangle-down":"triangle-right"},on:{click:function(e){return a.onToggleClick(n.current,e)}}}):e._e()],2)})),0)}),[],!1,null,null,null).exports},46482:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>B});var n=a(2954),i=a(78152),l=a(46016),o=a(64805),s=a(84374),r=a(40623),c=a(77995),u=function(e,t,a,n){return new(a||(a=Promise))((function(i,l){function o(e){try{r(n.next(e))}catch(e){l(e)}}function s(e){try{r(n.throw(e))}catch(e){l(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,s)}r((n=n.apply(e,t||[])).next())}))};const d=(e={menuOptions:{isReplaceMode:!1,isCurrentMapMode:!0,filters:{topic:!0,label:!0,note:!0,link:!0,boundary:!0,relationship:!0}}})=>{const{T:t}=(0,i.JE)(),{handleCommand:a}=(0,i.JX)(),{activeSheet:o,sheets:d,executeEditorAction:x,executeMutationAction:y,markerModule:T}=(0,s.nZ)(),b=(0,n.Fl)((()=>(0,l.$)().isOutlinerMode)),I=(0,n.iH)(""),C=(0,n.iH)(""),E=(0,n.iH)(e.menuOptions),w=(0,n.iH)("find"),O=(0,n.iH)([]),R=(0,n.Fl)((()=>O.value[0])),S=(0,n.Fl)((()=>{const e=I.value;if(e.length<=0)return null;const t=!E.value.isCurrentMapMode,a=t?d.value.map((e=>e.rootTopic)):[o.value.rootTopic],n=t?d.value.map((e=>e.relationships)).reduce(((e,t)=>e.concat(t))):o.value.relationships,{filters:i}=E.value,{wholeWords:l,matchCase:s}=i;return{keyword:e,rootTopics:a,relationships:n,rgx:v(e,l,s,!0)}})),_=(0,n.Fl)((()=>{if(!S.value)return[];const{filters:e}=E.value,{rootTopics:t,relationships:a,rgx:n}=S.value;let i=[];const l={};return t.forEach((t=>{var c,u,p,h,v,f;let x=[];const y=(e,t,a,n,i,l)=>{x.push({isSearchResult:!0,value:t,text:a,title:n,type:e,topicId:i,slotType:"searchItem",sheetId:l})};for(const a of k([t],b.value)){if(e.topic&&(null!==(c=a.title)&&void 0!==c?c:"").match(n)&&y("topic",a.id,a.title,a.title,a.id,a.ownerSheet.id),e.label){let e=[];const t=d.value.find((e=>a.ownerSheet.id===e.id));if(t){const n=null===(u=t.query({id:a.id}))||void 0===u?void 0:u.asTopic();n&&(e=s.HG.getLabels(n))}l[a.id]={labels:e,sheet:t}}if(e.note&&(null===(p=a.notes)||void 0===p?void 0:p.text)&&a.notes.text.match(n)){const e=`note-${a.id}-${a.notes.text}`;y("note",e,a.notes.text,a.title,a.id,a.ownerSheet.id)}if(e.link&&a.href&&g(a.href)&&a.href.match(n)){const e=`link-${a.id}-${a.href}`;y("link",e,a.href,a.title,a.id,a.ownerSheet.id)}if(e.boundary&&(null===(h=a.boundaries)||void 0===h?void 0:h.length)>0)for(const e of a.boundaries)(null===(v=e.title)||void 0===v?void 0:v.match(n))&&y("boundary",e.id,e.title,a.title,a.id,a.ownerSheet.id)}if(e.relationship&&a)for(const e of a)(null===(f=e.title)||void 0===f?void 0:f.match(n))&&t.ownerSheet.id===e.ownerSheet.id&&y("relationship",e.id,e.title,e.title,null,e.ownerSheet.id);e.label&&Object.keys(l).forEach((e=>{var a,i,s,c,u;let d=l[e].labels;const p=l[e].sheet;if(!p)return;if(t.ownerSheet.id!==p.id)return;const h=null===(a=p.query({id:e}))||void 0===a?void 0:a.asTopic();if(!h)return;const m=null===(s=null===(i=h.parentTopic)||void 0===i?void 0:i.parentTopic)||void 0===s?void 0:s.id,v=m?null===(c=o.value.query({id:m}))||void 0===c?void 0:c.asTopic():null;if(!h.extensionProviders.includes(r.v.SPREADSHEET)&&v&&v.extensionProviders.includes(r.v.SPREADSHEET)){const e=(null===(u=l[v.id])||void 0===u?void 0:u.labels)||[];d=d.filter((t=>!e.includes(t)))}d.forEach((t=>{if(t&&t.match(n)){y("label",`label-${e}-${t}`,t,h.title,e,h.ownerSheet.id)}}))})),x=m(n,x),E.value.isCurrentMapMode?i=x:x.length&&i.push(((e,t)=>{const a=e.map((e=>Object.assign(Object.assign({},e),{unindent:!0})));return{isSearchResult:!0,value:t.id,text:t.title,type:"topic",topicId:t.rootTopic.id,slotType:"sheetTitle",sheetId:t.id,expanded:!0,items:a}})(x,t.ownerSheet))})),i})),L=(0,n.Fl)((()=>{const{isCurrentMapMode:e}=E.value;if(!d.value.length)return[];return(e?[o.value]:d.value).map((e=>{const{rootTopic:a,title:n}=e;return{value:a.id,text:`[${n}]${p(a,t)}`,expanded:!0,items:h(a,(e=>({value:e.id,text:p(e,t),expanded:!0,items:[],sheetId:e.ownerSheet.id,slotType:"topicItem",type:"topic"})),((e,t)=>Object.assign(Object.assign({},e),{items:[...e.items,t]})),b.value).items,sheetId:e.id,type:"topic"}}))})),N=(0,n.Fl)((()=>{const{isCurrentMapMode:e}=E.value;if(!d.value.length)return[];return(e?[o.value]:d.value).map((e=>{const{rootTopic:t}=e;return h(t,(e=>{var t,a;return[{expanded:!0,value:e.id,text:null!==(a=null===(t=e.notes)||void 0===t?void 0:t.text)&&void 0!==a?a:"",title:e.title,slotType:"noteItem",sheetId:e.ownerSheet.id,type:"note"}]}),((e,t)=>e.concat(t)),b.value)})).reduce(((e,t)=>e.concat(t))).filter((e=>e.text.length>0))})),A=(0,n.Fl)((()=>{const e=((e,t)=>{const a=new Map;return e.filter((e=>!a.has(e[t])&&a.set(e[t],1)))})(h(o.value.rootTopic,(e=>e.markers.map((t=>{var a;const n=T.getMarkerInfoById(t);return{type:"marker",value:t,text:(null===(a=o.value.markerDescriptionFor(t))||void 0===a?void 0:a.name)||n.name,icon:n.imageSrc,unindent:!0,slotType:"item",sheetId:e.ownerSheet.id}}))),((e,t)=>e.concat(t)),b.value),"value"),a=[];e.length&&a.push({type:"marker",isTitle:!0,text:t("Marker"),value:"$tag-view-marker",expanded:!0,items:e,slotType:"item",sheetId:o.value.id});const n=s.HG.allLabelsFromSheet(o.value).map((e=>({type:"label",value:e,text:e,unindent:!0,slotType:"item",sheetId:o.value.id})));n.length>0&&a.push({type:"label",isTitle:!0,text:t("Label"),value:"$tag-view-label",expanded:!0,items:n,slotType:"item",sheetId:o.value.id});const i=new Map;return h(o.value.rootTopic,(e=>{if(e.task){const a=Object.assign({},e.task);a.status=e.task.status,null!==e.aggregatedCountOfTodos&&(a.status=e.aggregatedCountOfCheckedTodos===e.aggregatedCountOfTodos?"done":"todo");const n="status:"+("done"===a.status?"checked":"unchecked");i.has(e.id)||i.set(n,{type:"task",value:JSON.stringify(a),text:"done"===a.status?t("Completed"):t("Uncompleted"),icon:"",unindent:!0,slotType:"item",sheetId:e.ownerSheet.id})}}),(()=>{}),b.value),i.size>0&&(a.push({type:"task",isTitle:!0,text:t("Task"),value:"$tag-view-task",expanded:!0,items:Array.from(i.values()),slotType:"item",sheetId:o.value.id}),i.clear()),a})),M=e=>{y({name:"mutate:replaceText",payload:e})},P=e=>{if(!S.value)return;const{rgx:t}=S.value,a=C.value,n=e.filter((e=>"topic"===e.type)).map((e=>({id:e.topicId,type:"topic",sheetId:e.sheetId}))),i=e.filter((e=>"note"===e.type)).map((e=>({id:e.topicId,type:"note",sheetId:e.sheetId}))),l=e.filter((e=>"label"===e.type)).map((e=>({id:`${e.topicId}-${e.value}`,type:"label",sheetId:e.sheetId,topicId:e.topicId,value:e.value}))),o=e.filter((e=>"link"===e.type)).map((e=>({id:e.topicId,type:"link",sheetId:e.sheetId}))),s=e.filter((e=>"boundary"===e.type)).map((e=>({id:e.value,type:"boundary",sheetId:e.sheetId}))),r=e.filter((e=>"relationship"===e.type)).map((e=>({id:e.value,type:"relationship",sheetId:e.sheetId})));M({topics:n,notes:i,labels:l,links:o,boundaries:s,relationships:r,rgx:t,text:a})};return(0,n.YP)((()=>_.value),(e=>{O.value=O.value.filter((t=>e.find((e=>{let a=!0;return"topicId"in t&&"topicId"in e&&(a=t.topicId===e.topicId),a&&t.type===e.type&&t.value===e.value}))))}),{immediate:!0}),{mode:w,searchContent:I,replaceContent:C,options:E,searchResult:_,workbookData:L,workbookNotesData:N,workbookTagsData:A,selectedItems:O,selectedItem:R,selectItem:e=>O.value=[e],openSearchResultItem:e=>{const t=f(e),n=e.type,i=t?e.topicId:e.value;switch(n){case"topic":b.value?a("editor.selectTopicById",{topicId:i}):y({name:"mutate:selectTopics",payload:{topics:[i],centerOn:!0}});break;case"note":b.value?a("editor.selectTopicById",{topicId:i}):y({name:"mutate:selectTopics",payload:{topics:[i],centerOn:!0}}),(0,l.$)().setPopoverEditorVisible("notes");break;case"label":"item"===e.slotType?x({name:"mutateEditor:setHighlightLabels",payload:O.value.filter((e=>"label"===e.type)).map((e=>e.value))}):(b.value?a("editor.selectTopicById",{topicId:i}):y({name:"mutate:selectTopics",payload:{topics:[i],centerOn:!0}}),(0,l.$)().setPopoverEditorVisible("label"));break;case"link":b.value?a("editor.selectTopicById",{topicId:i}):y({name:"mutate:selectTopics",payload:{topics:[i],centerOn:!0}}),(0,c.H)();break;case"boundary":x({name:"mutateEditor:unfoldTopicAncestors",payload:{topicId:i}}),y({name:"mutate:selectBoundaries",payload:{boundaries:[e.value]}});break;case"relationship":x({name:"mutateEditor:unfoldTopicAncestors",payload:{topicId:i}}),y({name:"mutate:selectRelationships",payload:{relationships:[e.value]}});break;case"marker":x({name:"mutateEditor:setHighlightMarkers",payload:O.value.filter((e=>"marker"===e.type)).map((e=>e.value))});break;case"task":x({name:"mutateEditor:setHighlightTasks",payload:O.value.filter((e=>"task"===e.type)).map((e=>JSON.parse(e.value)))})}if(!b.value){const{activeSheetViewer:e}=(0,s.nZ)();e.value.focus()}},replaceText:M,onReplace:()=>{if(!R.value||!S.value)return;const e=R.value,t=f(e),a=t?e.type:"topic",n=t?["boundary","relationship"].includes(a)?e.value:e.topicId:e.value,i=R.value.sheetId,{rgx:l}=S.value,o=C.value;M({rgx:l,text:o,topics:"topic"===a?[{id:n,type:"topic",sheetId:i}]:[],notes:"note"===a?[{id:n,type:"note",sheetId:i}]:[],labels:"label"===a?[{id:`${n}-${e.value}`,type:"label",sheetId:i,topicId:n,value:e.value}]:[],links:"link"===a?[{id:n,type:"link",sheetId:i}]:[],boundaries:"boundary"===a?[{id:n,type:"boundary",sheetId:i}]:[],relationships:"relationship"===a?[{id:n,type:"relationship",sheetId:i}]:[]})},onReplaceAll:(e=_.value)=>u(void 0,void 0,void 0,(function*(){const{isCurrentMapMode:t}=E.value;t?P(e):e.reduce(((e,t)=>u(void 0,void 0,void 0,(function*(){return yield e,new Promise((e=>{setTimeout((()=>{e(P(t.items||[]))}))}))}))),Promise.resolve())}))}};function p(e,t){return e.imageSource?`[${t("Image")}] ${e.title||""}`:e.title}function h(e,t,a,n){let i=t(e);for(const l of e.children)i=a(i,h(l,t,a,n));for(const l of e.detachedChildren)i=a(i,h(l,t,a,n));if(!n){for(const l of e.summaries.map((e=>e.topic)))i=a(i,h(l,t,a,n));e.callout&&(i=a(i,h(e.callout,t,a,n)))}return i}const m=(e,t)=>t.map((t=>{const a=t.text,n=[],i=a.split(e),l=a.match(e);let o=!1;const s=i.length+l.length;for(let e=0;e<s;e++)o?n.push({text:l.shift(),isHighlight:!0}):n.push({text:i.shift(),isHighlight:!1}),o=!o;return t.highlight=n.filter((e=>!!e.text)),t})),v=(e,t,a,n)=>{if(!e)return;e=(e=>e.replace(/[-\\{}*+?|^$.[\]()#]/g,"\\$&"))(e),t&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e+="\\b"));let i="";return a||(i+="i"),n&&(i+="g"),new RegExp(e,i)},g=e=>e.startsWith("http"),f=e=>!!e.isSearchResult;function*k(e,t){var a,n;for(const i of e){yield i;for(const e of k(i.children,t))yield e;for(const e of k(null!==(a=i.detachedChildren)&&void 0!==a?a:[],t))yield e;if(!t){for(const e of k((null!==(n=i.summaries)&&void 0!==n?n:[]).map((e=>e.topic)),t))yield e;i.callout&&(yield i.callout)}}}var x=a(21292),y=a(42855),T=a(67657),b=a(95246);const I=(0,n.aZ)({__name:"toolbar",props:{searchContent:{default:""},replaceContent:{default:""},showFiltersOptions:{type:Boolean,default:!0},showReplaceOptions:{type:Boolean,default:!0},menuOptions:null,searchText:null,replaceText:null,disabledSearch:{type:Boolean,default:!1},disabledReplace:{type:Boolean,default:!0},disabledReplaceAll:{type:Boolean,default:!0},disabledItems:{default:()=>[]}},emits:["update:searchContent","update:replaceContent","update:menuOptions","replace","replaceAll"],setup(e,{emit:t}){const a=e,{T:l}=(0,i.JE)(),{Menu:o}=T,s=(0,n.iH)(),r=(0,n.FN)(),c=(0,n.Fl)((()=>r.proxy.$toResourceURL("static/images/pitchmode/setting.svg"))),u=(0,n.Fl)((()=>r.proxy.$toResourceURL("/static/images/navigation-panel/searchbar-search.svg"))),d=(0,n.Fl)((()=>r.proxy.$toResourceURL("/static/images/navigation-panel/searchbar-replace.svg"))),p=e=>!a.disabledItems.includes(e),h=(e,n)=>{let i=Object.assign({},a.menuOptions);["isReplaceMode","isCurrentMapMode"].includes(e)?i[e]=n:(i=Object.assign({},a.menuOptions),i.filters=Object.assign({},a.menuOptions.filters),i.filters[e]=n),t("update:menuOptions",i)},m=(e,t)=>{const{filters:n}=a.menuOptions;return{label:t,id:e,click:t=>{h(e,!n[e]),t.checked=!n[e]},type:"checkbox",enabled:p(e),checked:n[e]}};return(0,n.bv)((()=>{s.value.focus()})),{__sfc:!0,$T:l,Menu:o,props:a,emit:t,searchInput:s,vm:r,gearImage:c,searchIconImage:u,replaceIconImage:d,onUpdateSearchContent:e=>t("update:searchContent",e.target.value),onUpdateReplaceContent:e=>t("update:replaceContent",e.target.value),onReplace:()=>t("replace",a.replaceContent),onReplaceAll:()=>{t("replaceAll",a.replaceContent)},handleShowInputMenu:()=>(0,b.Sr)(a.searchContent),getMenuOptionEnabled:p,updateMenuOptions:h,getCheckboxMenuOption:m,onToggleConfig:()=>{const{isReplaceMode:e,isCurrentMapMode:t}=a.menuOptions;let n=[{type:"separator"},{label:l("Current Map"),id:"currentMap",click:e=>{h("isCurrentMapMode",!0),e.checked=!0},type:"radio",enabled:p("currentMap"),checked:t},{label:l("Current File"),id:"wholeWorkbook",click:e=>{h("isCurrentMapMode",!1),e.checked=!0},type:"radio",enabled:p("wholeWorkbook"),checked:!t},{type:"separator"},m("wholeWords",l("Whole Words")),m("matchCase",l("Match Case"))];a.showReplaceOptions&&(n=[{label:l("Find"),id:"find",click:e=>{h("isReplaceMode",!1),e.checked=!0},type:"radio",enabled:p("find"),checked:!e},{label:l("Find & Replace").replace(/(&)/g,"$1$1"),id:"replace",click:e=>{h("isReplaceMode",!0),e.checked=!0},type:"radio",enabled:p("replace"),checked:e}].concat(n)),a.showFiltersOptions&&(n=n.concat([{type:"separator"},m("topic",l("Topic")),m("note",l("Note")),m("relationship",l("Relationship")),m("boundary",l("Boundary")),m("label",l("Label")),m("link",l("Link(noun)"))])),o.buildFromTemplate(n).popup({window:T.getCurrentWindow()})}}}});var C=a(51900);const E=(0,C.Z)(I,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"uk-flex uk-flex-middle uk-padding",style:{paddingRight:"6px"}},[t("div",{staticClass:"uk-width-1-1"},[t("div",{staticClass:"uk-position-relative"},[t("img",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-position-absolute",staticStyle:{top:"3px",left:"4px"},attrs:{src:a.searchIconImage,"uk-svg":""}}),e._v(" "),t("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts",value:["focus.input"],expression:"['focus.input']"}],ref:"searchInput",staticClass:"uk-input uk-search-input",staticStyle:{"padding-left":"20px"},attrs:{disabled:e.disabledSearch,placeholder:e.searchText||a.$T("Find")},domProps:{value:e.searchContent},on:{input:a.onUpdateSearchContent,contextmenu:function(e){return a.handleShowInputMenu()}}})]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.menuOptions.isReplaceMode,expression:"menuOptions.isReplaceMode"}],staticClass:"uk-position-relative"},[t("img",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-position-absolute",staticStyle:{top:"13px",left:"4px"},attrs:{src:a.replaceIconImage,"uk-svg":"",draggable:"false"}}),e._v(" "),t("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts",value:["focus.input"],expression:"['focus.input']"}],staticClass:"uk-input uk-margin-small-top uk-search-input",staticStyle:{"padding-left":"20px"},attrs:{placeholder:e.replaceText||a.$T("Replace")},domProps:{value:e.replaceContent},on:{input:a.onUpdateReplaceContent}})]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.menuOptions.isReplaceMode,expression:"menuOptions.isReplaceMode"}],staticClass:"uk-margin-small-top uk-flex uk-flex-row uk-flex-right"},[t("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-floating uk-margin-small-right",attrs:{disabled:e.disabledReplace},on:{click:a.onReplace}},[e._v("\n        "+e._s(a.$T("Replace"))+"\n      ")]),e._v(" "),t("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-floating",attrs:{disabled:e.disabledReplaceAll},on:{click:a.onReplaceAll}},[e._v("\n        "+e._s(a.$T("Replace All"))+"\n      ")])])]),e._v(" "),t("div",{style:{marginLeft:"6px"}},[t("div",{staticClass:"uk-button uk-button-tile uk-button-icon customize-icon",staticStyle:{width:"22px"},on:{click:a.onToggleConfig}},[t("img",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],attrs:{src:a.gearImage,"uk-svg":"",draggable:"false"}})])])])}),[],!1,null,null,null).exports,w=(0,n.aZ)({__name:"topic-panel",props:{panelWidth:{default:268},sheetRendering:{type:Boolean}},setup(e){const{searchContent:t,replaceContent:a,options:i,searchResult:o,workbookData:s,selectedItem:r,selectItem:c,openSearchResultItem:u,onReplace:p,onReplaceAll:h}=d(),m=(0,n.iH)(),v=(0,n.Fl)((()=>t.value.length>0)),g=(0,n.Fl)((()=>(0,l.$)().isOutlinerMode)),f=(0,n.Fl)((()=>!t.value||(!r.value||!("isSearchResult"in r.value)))),k=(0,n.Fl)((()=>{const{isCurrentMapMode:e}=i.value;if(!t.value)return!0;if(e){if(!o.value||!o.value.length)return!0}else if(o.value.every((e=>{var t;return 0===(null===(t=e.items)||void 0===t?void 0:t.length)})))return!0;return!1}));return(0,n.YP)((()=>g.value),(e=>{i.value.filters.relationship=!e,i.value.filters.boundary=!e}),{immediate:!1}),{__sfc:!0,searchContent:t,replaceContent:a,options:i,searchResult:o,workbookData:s,selectedItem:r,selectItem:c,openSearchResultItem:u,onReplace:p,onReplaceAll:h,containerEl:m,isSearchMode:v,isOutlinerMode:g,computedDisabledReplace:f,computedDisabledReplaceALL:k,handleSelect:e=>{c(e),u(e)},CommonNonePanel:x.Z,TreeListV2:y.Z,Toolbar:E}}});const O=(0,C.Z)(w,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"uk-flex uk-flex-column uk-height-expand uk-panel uk-flex-column",staticStyle:{"padding-right":"1px"}},[t(a.Toolbar,{attrs:{"search-content":a.searchContent,"replace-content":a.replaceContent,"menu-options":a.options,"disabled-search":e.sheetRendering,"disabled-replace":a.computedDisabledReplace,"disabled-replace-all":a.computedDisabledReplaceALL,"disabled-items":a.isOutlinerMode?["relationship","boundary"]:[]},on:{"update:searchContent":e=>a.searchContent=e,"update:replaceContent":e=>a.replaceContent=e,"update:menuOptions":e=>a.options=e,replace:function(e){return a.onReplace()},replaceAll:function(e){return a.onReplaceAll()}}}),e._v(" "),t("hr",{directives:[{name:"show",rawName:"v-show",value:a.searchContent&&""!==a.searchContent,expression:"searchContent && searchContent !== ''"}],staticClass:"uk-separator"}),e._v(" "),a.isSearchMode&&0===a.searchResult.length?t(a.CommonNonePanel,{attrs:{type:"NO_RESULT","section-style":"margin-top: -30px;"}}):t("div",{ref:"containerEl",staticClass:"uk-height-expand uk-panel uk-overflow-auto uk-flex uk-flex-column",class:{"uk-disabled":!1},staticStyle:{width:"100%"},style:{zIndex:0,opacity:1}},[t("keep-alive",[t(a.TreeListV2,{attrs:{items:a.isSearchMode?a.searchResult:a.workbookData,"high-performance-mode":!a.isSearchMode,container:a.containerEl,"model-value":a.selectedItem?[a.selectedItem.value]:[],width:e.panelWidth,striped:a.isSearchMode,"allow-direction-key":"",type:"radio"},on:{click:a.handleSelect},scopedSlots:e._u([{key:"sheetTitle",fn:function({data:a,offset:n}){return[t("hr",{staticClass:"uk-separator"}),e._v(" "),t("button",{staticClass:"uk-tree-list-item uk-tree-list-solid-background",style:{"padding-left":n+"px"}},[e._v("\n            "+e._s(a.text)+"\n          ")]),e._v(" "),t("hr",{staticClass:"uk-separator"})]}},{key:"searchItem",fn:function({data:a,onClick:n,checked:i}){return[t("button",{staticClass:"uk-tree-list-item uk-width-1-1 uk-position-relative",class:{"uk-checked":i,"uk-focus":i},staticStyle:{"padding-left":"16px"},style:{"padding-left":16+("topic"!==a.type?18:0)+"px"},on:{click:n}},["topic"!==a.type?t("img",{staticClass:"uk-icon uk-position-absolute",class:{"uk-checked":i},staticStyle:{top:"7px",left:"16px",opacity:"0.7"},attrs:{"uk-svg":"","data-src":e.$toResourceURL(`static/images/search-panel-icon/${a.type}.svg `),draggable:"false"}}):e._e(),e._v(" "),a.highlight?t("p",{staticClass:"uk-margin-remove",staticStyle:{"line-height":"1.4em"}},e._l(a.highlight,(function({text:a,isHighlight:n},i){return t("span",{key:i,class:{"uk-tree-list-highlight":n}},[e._v(e._s(a))])})),0):t("p",{staticClass:"uk-margin-remove"},[e._v(e._s(a.text))])])]}}])})],1)],1)],1)}),[],!1,null,"2b21d994",null).exports;const R=(0,n.aZ)({__name:"note-panel",props:{panelWidth:{default:268},highlightParam:{default:null},sheetRendering:{type:Boolean}},setup(e){const t=e,{T:a}=(0,i.JE)(),{searchContent:l,searchResult:o,replaceContent:s,workbookNotesData:r,options:c,selectedItem:u,selectItem:p,onReplace:h,onReplaceAll:m,openSearchResultItem:v}=d({menuOptions:{filters:{note:!0}}});(0,n.YP)((()=>t.highlightParam),(e=>{(0,n.Y3)((()=>{p({value:e.topicId,text:void 0,sheetId:void 0,type:void 0})}))}),{immediate:!0});const g=(0,n.Fl)((()=>a("<Empty Text>"))),f=(0,n.Fl)((()=>{const{isCurrentMapMode:e}=c.value,t=[];return e?t.push(...o.value):o.value.forEach((e=>{t.push(...e.items)})),t.filter((e=>"note"===e.type)).map((e=>Object.assign(Object.assign({},e),{type:"note",slotType:"noteItem"})))})),k=(0,n.Fl)((()=>l.value.length>0)),T=(0,n.Fl)((()=>!l.value||(!u.value||!("isSearchResult"in u.value)))),b=(0,n.Fl)((()=>{const{isCurrentMapMode:e}=c.value;if(!l.value)return!0;if(e){if(!o.value||!o.value.length)return!0}else if(o.value.every((e=>{var t;return 0===(null===(t=e.items)||void 0===t?void 0:t.length)})))return!0;return!1}));return{__sfc:!0,$T:a,props:t,searchContent:l,searchResult:o,replaceContent:s,workbookNotesData:r,options:c,selectedItem:u,selectItem:p,onReplace:h,onReplaceAll:m,openSearchResultItem:v,emptyText:g,noteSearchResult:f,isSearchMode:k,handleSelect:e=>{p(e),v(e)},computedDisabledReplace:T,computedDisabledReplaceALL:b,CommonNonePanel:x.Z,TreeListV2:y.Z,Toolbar:E}}});a(64391);const S=(0,C.Z)(R,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"uk-height-expand uk-panel uk-flex uk-flex-column"},[t(a.Toolbar,{attrs:{"search-content":a.searchContent,"replace-content":a.replaceContent,"menu-options":a.options,"disabled-search":e.sheetRendering,"disabled-replace":a.computedDisabledReplace,"disabled-replace-all":a.computedDisabledReplaceALL,"search-text":a.$T("Search notes"),"show-filters-options":!1},on:{"update:searchContent":e=>a.searchContent=e,"update:replaceContent":e=>a.replaceContent=e,"update:menuOptions":e=>a.options=e,replace:function(e){return a.onReplace()},replaceAll:function(e){return a.onReplaceAll()}}}),e._v(" "),a.options.isCurrentMapMode||(a.isSearchMode?0===a.noteSearchResult.length:0===a.workbookNotesData.length)?t("hr",{staticClass:"uk-separator"}):e._e(),e._v(" "),(a.isSearchMode?0===a.noteSearchResult.length:0===a.workbookNotesData.length)?t(a.CommonNonePanel,{attrs:{type:a.isSearchMode?"NO_RESULT":"NO_NOTE","section-style":"margin-top: -30px;"}}):t("div",{staticClass:"uk-height-expand uk-panel uk-overflow-auto uk-flex uk-flex-column",class:{"uk-disabled":e.sheetRendering},staticStyle:{width:"100%"},style:{zIndex:0,opacity:e.sheetRendering?.3:1}},[t(a.TreeListV2,{attrs:{items:a.isSearchMode?a.noteSearchResult:a.workbookNotesData,"model-value":a.selectedItem?[a.selectedItem.value]:[]},on:{"!click":function(e){return a.handleSelect.apply(null,arguments)}},scopedSlots:e._u([{key:"sheetTitle",fn:function({data:a,offset:n}){return[t("hr",{staticClass:"uk-separator"}),e._v(" "),t("button",{staticClass:"uk-tree-list-item uk-tree-list-solid-background",style:{"padding-left":n+"px"}},[e._v("\n          "+e._s(a.text)+"\n        ")]),e._v(" "),t("hr",{staticClass:"uk-separator"})]}},{key:"noteItem",fn:function({data:n,checked:i,onClick:l}){return[t("button",{staticClass:"uk-tree-list-item",class:{"uk-checked":i,"uk-focus":i},staticStyle:{padding:"16px","overflow-wrap":"break-word"},attrs:{name:n.value},on:{click:l}},[t("div",{staticClass:"uk-text-truncate",staticStyle:{"white-space":"nowrap","font-weight":"500"}},[e._v("\n            "+e._s(n.title||a.emptyText)+"\n          ")]),e._v(" "),t("div",{staticClass:"uk-text-line-clamp",staticStyle:{"margin-top":"4px","line-height":"1.4em"}},[a.isSearchMode&&n.highlight?t("p",{staticClass:"uk-margin-remove"},e._l(n.highlight,(function({text:a,isHighlight:n},i){return t("span",{key:i,class:{"uk-tree-list-highlight":n}},[e._v(e._s(a))])})),0):t("p",{staticClass:"uk-margin-remove"},[e._v("\n              "+e._s(n.text||a.emptyText)+"\n            ")])])]),e._v(" "),t("hr",{staticClass:"uk-separator",staticStyle:{padding:"0 16px"}})]}}])})],1)],1)}),[],!1,null,"06781412",null).exports;var _=a(45578),L=a.n(_),N=a(90435),A=a(54856),M=a(20993),P=function(e,t,a,n){return new(a||(a=Promise))((function(i,l){function o(e){try{r(n.next(e))}catch(e){l(e)}}function s(e){try{r(n.throw(e))}catch(e){l(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,s)}r((n=n.apply(e,t||[])).next())}))};const H=(0,n.aZ)({__name:"tag-panel",props:{panelWidth:{default:268},highlightParam:{default:null},sheetRendering:{type:Boolean}},setup(e){const t=e,{workbookTagsData:a,selectedItem:i,selectedItems:l,openSearchResultItem:o,selectItem:s}=d({menuOptions:{filters:{note:!0}}});(0,n.YP)((()=>t.highlightParam),(e=>{(0,n.Y3)((()=>{const t={value:void 0,text:void 0,sheetId:void 0,type:void 0};e.selectedLabel?(t.value=e.selectedLabel,t.type="label"):e.markerId?(t.value=e.markerId,t.type="marker"):e.taskInfo&&(t.value=JSON.stringify(e.taskInfo),t.type="task"),s(t)}))}),{immediate:!0});const r=e=>l.value.find((t=>t.value===e.value)),c=e=>{const t=a.value.find((t=>t.type===e));return!!t&&l.value.filter((t=>t.type===e)).length===t.items.length};return{__sfc:!0,props:t,workbookTagsData:a,selectedItem:i,selectedItems:l,openSearchResultItem:o,selectItem:s,handleSelect:e=>P(this,void 0,void 0,(function*(){if(yield N.ZP.fetch(A.Gy,"action.topicFilter")){if("task"===e.type)try{const t=JSON.parse(e.value);(0,M.kI)("done"===t.status?"highlightCheckedTask":"highlightUncheckedTask")}catch(e){}e.isTitle?c(e.type)?l.value=l.value.filter((t=>t.type!==e.type)):l.value=L()([...l.value,...e.items],"value"):r(e)?l.value=l.value.filter((t=>t.value!==e.value)):l.value=L()([...l.value,e],"value"),o(e)}})),isItemChecked:r,isTitleChecked:c,CommonNonePanel:x.Z,TreeListV2:y.Z}}});a(37509);const D=(0,C.Z)(H,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"uk-height-expand uk-panel uk-flex uk-flex-column"},[0===a.workbookTagsData.length?t(a.CommonNonePanel,{attrs:{type:"NO_TAG","section-style":"margin-top: -30px;"}}):t("div",{staticClass:"uk-height-expand uk-panel uk-overflow-auto uk-flex uk-flex-column",class:{"uk-disabled":e.sheetRendering},staticStyle:{width:"100%"},style:{zIndex:0,opacity:e.sheetRendering?.3:1}},[t(a.TreeListV2,{attrs:{items:a.workbookTagsData,"model-value":a.selectedItem?[a.selectedItem.value]:[]},scopedSlots:e._u([{key:"item",fn:function({data:n,offset:i}){return[t("button",{staticClass:"uk-tree-list-item lm-view-item",style:{"padding-left":i+"px"},attrs:{"lm-checked":!0,name:n.value},on:{click:()=>a.handleSelect(n)}},["marker"!==n.type||n.isTitle?e._e():t("img",{staticStyle:{width:"16px",height:"16px","vertical-align":"middle"},attrs:{draggable:"false","uk-img":"",src:n.icon}}),e._v(" "),t("span",{staticClass:"uk-text-middle"},[e._v(" "+e._s(n.text)+" ")]),e._v(" "),t("div",{staticClass:"lm-select-icon uk-float-right",style:(n.isTitle?a.isTitleChecked(n.type):a.isItemChecked(n))?"visibility: visible !important;":""},[t("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-filter uk-display-inline-block",class:{"uk-checked":n.isTitle?a.isTitleChecked(n.type):a.isItemChecked(n)},attrs:{src:(n.isTitle?a.isTitleChecked(n.type):a.isItemChecked(n))?e.$toResourceURL("/static/images/navigation-panel/sun-fill.svg"):e.$toResourceURL("/static/images/navigation-panel/sun.svg"),"uk-svg":""}})])])]}}])})],1)],1)}),[],!1,null,"e9e14f3a",null).exports,F=(0,n.aZ)({props:{panelWidth:Number},components:{TopicPanel:O,NotePanel:S,TagPanel:D},setup(){const e=(e,...t)=>(0,i.JE)().T(e,...t),{updateSearchPanel:t,updateSearchPanelHighlightItem:a}=(0,l.$)(),r=(0,n.Fl)((()=>(0,l.$)().searchPanelTab)),c=(0,n.Fl)((()=>(0,l.$)().searchPanelHighlightParam)),u=(0,n.Fl)((()=>(0,l.$)().isOutlinerMode)),d=(0,n.Fl)((()=>o.JK.map((t=>Object.assign(Object.assign({},t),{tooltip:e("$$",t.tooltip)}))))),p=(0,n.Fl)((()=>{switch(r.value){case o.It.TOPIC:return"topic-panel";case o.It.NOTE:return"note-panel";case o.It.TAG:return"tag-panel"}})),h=e=>{t({tab:e})},m=()=>{a({});const{executeEditorAction:e}=(0,s.nZ)();e({name:"mutateEditor:setHighlightLabels",payload:[]}),e({name:"mutateEditor:setHighlightMarkers",payload:[]}),e({name:"mutateEditor:setHighlightTasks",payload:[]})};(0,n.YP)((()=>(0,l.$)().searchPanelTab),((e,t)=>{t===o.It.TAG&&e!==o.It.TAG&&m()}));return(0,n.YP)((()=>(0,l.$)().isOutlinerMode),(e=>{e&&h(o.It.TOPIC)})),{isOutlinerMode:u,searchPanelTabs:d,searchPanelTab:r,searchPanelHighlightParam:c,searchPanelTabComponent:p,switchSearchPanelTab:h,handleSearchPanelClose:()=>{t({visible:!1}),m()}}}});const B=(0,C.Z)(F,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.searchPanel"],expression:"['focus.searchPanel']",arg:"group"}],staticClass:"uk-flex uk-flex-column uk-height-1-1 uk-panel uk-position-left uk-format-panel",style:`width: ${e.panelWidth}px`},[t("div",{staticClass:"uk-flex uk-flex-between uk-flex-middle",staticStyle:{height:"28px"}},[t("div",[e.isOutlinerMode?e._e():t("ul",{staticClass:"uk-tab uk-tab-capsule uk-margin-remove-bottom navigation-panel-ul",staticStyle:{"padding-left":"4px"}},e._l(e.searchPanelTabs,(function(a,n){return t("li",{key:a.key,staticClass:"divider-vertical",class:{"uk-active":a.key===e.searchPanelTab,"divider-vertical-active":a.key===e.searchPanelTab,"divider-vertical-clear":0===n},on:{click:function(t){return e.switchSearchPanelTab(a.key)}}},[t("a",{directives:[{name:"show",rawName:"v-show",value:a.key!==e.searchPanelTab,expression:"item.key !== searchPanelTab"}],staticStyle:{width:"28px",color:"unset"},attrs:{href:"#",title:a.tooltip,draggable:"false"}},[t("img",{staticStyle:{"margin-top":"-3px"},attrs:{src:a.image,"uk-svg":""}})]),e._v(" "),t("a",{directives:[{name:"show",rawName:"v-show",value:a.key===e.searchPanelTab,expression:"item.key === searchPanelTab"}],staticStyle:{width:"28px",color:"#fff","background-color":"#0f66de"},attrs:{href:"#",title:a.tooltip,draggable:"false"}},[t("img",{staticStyle:{"margin-top":"-3px"},attrs:{src:a.image,"uk-svg":""}})])])})),0)]),e._v(" "),t("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-tile uk-button-icon uk-icon uk-margin-small-right",staticStyle:{width:"20px",height:"20px","min-height":"20px"},attrs:{"uk-icon":"close"},on:{click:e.handleSearchPanelClose}})]),e._v(" "),t("hr",{staticClass:"uk-margin-remove"}),e._v(" "),t("keep-alive",[t(e.searchPanelTabComponent,{tag:"component",attrs:{"panel-width":264,"highlight-param":e.searchPanelHighlightParam}})],1)],1)}),[],!1,null,"f78b4d64",null).exports},64391:(e,t,a)=>{var n=a(46754);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,a(45346).Z)("2bd5954c",n,!0,{})},37509:(e,t,a)=>{var n=a(63693);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,a(45346).Z)("075c2aeb",n,!0,{})}}]);